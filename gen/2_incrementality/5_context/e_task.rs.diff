--- pie/src/context/top_down.rs
+++ pie/src/context/top_down.rs
@@ -34,6 +34,22 @@
   }
 
   fn require_task_with_stamper(&mut self, task: &T, stamper: OutputStamper) -> T::Output {
-    todo!()
+    let node = self.store.get_or_create_task_node(task);
+
+    // Get required task output by executing it if needed, or by getting the output from the store if not needed.
+    let output = if self.should_execute_task(&node) {
+      self.store.reset_task(&node);
+      let previous_executing_task = self.current_executing_task.replace(node);
+      let output = task.execute(self);
+      self.current_executing_task = previous_executing_task;
+      self.store.set_task_output(&node, output.clone());
+      output
+    } else {
+      // Correctness: when `should_execute_task` returns `true`, the above block is executed. Otherwise this block is
+      // executed and `should_execute_task` ensures that the task has an output.
+      self.store.get_task_output(&node).clone()
+    };
+
+    output
   }
 }
